<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brio - Bear-Style 3-Column UI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', sans-serif;
            background: #E5E5E5;
            overflow: hidden;
            height: 100vh;
        }

        body.dark-mode {
            background: #1C1C1E;
        }

        .container {
            display: flex;
            height: 100vh;
            background: white;
        }

        body.dark-mode .container {
            background: #1C1C1E;
        }

        /* ===== SIDEBAR (Left - 220px) ===== */
        .sidebar {
            width: 220px;
            background: #F5F5F5;
            border-right: 1px solid #E0E0E0;
            overflow-y: auto;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
        }

        body.dark-mode .sidebar {
            background: #2C2C2E;
            border-right-color: #3A3A3C;
        }

        .sidebar-header {
            height: 36px;
            padding: 0 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .sidebar-logo {
            font-size: 14px;
            font-weight: 500;
            color: #555555;
        }

        body.dark-mode .sidebar-logo {
            color: #E5E5E7;
        }

        .sidebar-settings-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            color: #888888;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.1s;
        }

        body.dark-mode .sidebar-settings-button {
            color: #8E8E93;
        }

        .sidebar-settings-button:hover {
            color: #333333;
        }

        body.dark-mode .sidebar-settings-button:hover {
            color: #E5E5E7;
        }

        .sidebar-settings-button svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            fill: none;
            stroke-width: 1;
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .sidebar-section {
            margin-bottom: 16px;
        }

        .section-header {
            font-size: 11px;
            font-weight: 400;
            color: #999999;
            text-transform: none;
            letter-spacing: 0;
            padding: 8px 12px 4px 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            user-select: none;
        }

        body.dark-mode .section-header {
            color: #8E8E93;
        }

        .chevron {
            font-size: 10px;
            color: #CCCCCC;
            transition: transform 0.2s;
        }

        .chevron.expanded {
            transform: rotate(90deg);
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 6px 12px;
            cursor: pointer;
            transition: background 0.1s;
            height: 32px;
        }

        .sidebar-item:hover {
            background: rgba(0, 0, 0, 0.04);
        }

        body.dark-mode .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .sidebar-item.active {
            background: rgba(0, 0, 0, 0.06);
        }

        body.dark-mode .sidebar-item.active {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-item.nested {
            padding-left: 32px;
        }

        .sidebar-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            flex-shrink: 0;
            color: #888888;
        }

        body.dark-mode .sidebar-icon {
            color: #8E8E93;
        }

        .sidebar-icon svg {
            width: 100%;
            height: 100%;
            stroke: currentColor;
            fill: none;
            stroke-width: 1;
        }

        .sidebar-label {
            font-size: 13px;
            font-weight: 400;
            color: #555555;
            flex: 1;
        }

        body.dark-mode .sidebar-label {
            color: #E5E5E7;
        }

        .sidebar-count {
            font-size: 12px;
            color: #AAAAAA;
            margin-left: auto;
        }

        body.dark-mode .sidebar-count {
            color: #8E8E93;
        }

        /* Tag tree structure */
        .tag-item {
            display: flex;
            align-items: center;
            padding: 6px 12px;
            cursor: pointer;
            transition: background 0.1s;
            height: 32px;
        }

        .tag-item:hover {
            background: rgba(0, 0, 0, 0.04);
        }

        body.dark-mode .tag-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .tag-item.active {
            background: rgba(0, 0, 0, 0.06);
        }

        body.dark-mode .tag-item.active {
            background: rgba(255, 255, 255, 0.1);
        }

        .tag-chevron {
            width: 12px;
            height: 12px;
            margin-right: 4px;
            font-size: 10px;
            color: #CCCCCC;
            transition: transform 0.2s;
            flex-shrink: 0;
        }

        body.dark-mode .tag-chevron {
            color: #8E8E93;
        }

        .tag-chevron.expanded {
            transform: rotate(90deg);
        }

        .tag-chevron.hidden {
            visibility: hidden;
        }

        .tag-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            flex-shrink: 0;
            color: #888888;
        }

        body.dark-mode .tag-icon {
            color: #8E8E93;
        }

        .tag-icon svg {
            width: 100%;
            height: 100%;
            stroke: currentColor;
            fill: none;
            stroke-width: 1;
        }

        .tag-label {
            font-size: 13px;
            font-weight: 400;
            color: #555555;
            flex: 1;
        }

        body.dark-mode .tag-label {
            color: #E5E5E7;
        }

        .tag-count {
            font-size: 12px;
            color: #AAAAAA;
            margin-left: auto;
        }

        body.dark-mode .tag-count {
            color: #8E8E93;
        }

        /* Child tags */
        .tag-item.child {
            padding-left: 32px;
        }

        .tag-item.child .tag-label {
            font-size: 12px;
            color: #777777;
        }

        body.dark-mode .tag-item.child .tag-label {
            color: #8E8E93;
        }

        .tag-children {
            display: none;
        }

        .tag-children.expanded {
            display: block;
        }

        /* Notes children */
        .notes-children {
            display: none;
        }

        .notes-children.expanded {
            display: block;
        }

        /* ===== NOTE LIST (Middle - 280px) ===== */
        .note-list-container {
            width: 280px;
            background: #FFFFFF;
            border-right: 1px solid #E0E0E0;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            position: relative;
        }

        body.dark-mode .note-list-container {
            background: #1C1C1E;
            border-right-color: #3A3A3C;
        }

        .note-list-header {
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 36px;
            flex-shrink: 0;
        }

        .header-default {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .header-default.hidden {
            display: none;
        }

        .header-filter {
            display: none;
            align-items: center;
            gap: 8px;
            width: 100%;
        }

        .header-filter.active {
            display: flex;
        }

        /* Sort dropdown menu */
        .sort-dropdown {
            position: absolute;
            top: 44px;
            right: 16px;
            background: #FFFFFF;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 12px 0;
            min-width: 180px;
            display: none;
            z-index: 100;
        }

        body.dark-mode .sort-dropdown {
            background: #2C2C2E;
            border-color: #3A3A3C;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .sort-dropdown.active {
            display: block;
        }

        .sort-section-label {
            font-size: 11px;
            font-weight: 400;
            color: #999999;
            padding: 4px 12px 4px 12px;
            text-transform: none;
            letter-spacing: 0;
        }

        body.dark-mode .sort-section-label {
            color: #8E8E93;
        }

        .sort-option {
            padding: 6px 12px;
            cursor: pointer;
            font-size: 13px;
            color: #555555;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.1s;
            height: 32px;
        }

        body.dark-mode .sort-option {
            color: #E5E5E7;
        }

        .sort-option:hover {
            background: rgba(0, 0, 0, 0.04);
        }

        body.dark-mode .sort-option:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .sort-option .checkmark {
            font-size: 12px;
            color: #F59E0B;
            visibility: hidden;
        }

        .sort-option.selected .checkmark {
            visibility: visible;
        }

        .sort-divider {
            height: 1px;
            background: #E0E0E0;
            margin: 8px 0;
        }

        body.dark-mode .sort-divider {
            background: #3A3A3C;
        }

        /* Right side: Icon group */
        .header-icons {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-icon-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            color: #888888;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.1s;
        }

        body.dark-mode .header-icon-button {
            color: #8E8E93;
        }

        .header-icon-button:hover {
            color: #333333;
        }

        body.dark-mode .header-icon-button:hover {
            color: #E5E5E7;
        }

        .header-icon-button svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            fill: none;
            stroke-width: 1;
        }

        .note-list {
            flex: 1;
            overflow-y: auto;
            border-top: 1px solid #F0F0F0;
        }

        body.dark-mode .note-list {
            border-top-color: #2C2C2E;
        }

        .note-item {
            padding: 12px 16px;
            border-bottom: 1px solid #F0F0F0;
            cursor: pointer;
            transition: background 0.1s;
        }

        body.dark-mode .note-item {
            border-bottom-color: #2C2C2E;
        }

        .note-item:hover {
            background: #F9F9F9;
        }

        body.dark-mode .note-item:hover {
            background: #2C2C2E;
        }

        .note-item.selected {
            background: #E3E9F0;
        }

        body.dark-mode .note-item.selected {
            background: #3A3A3C;
        }

        .note-title {
            font-size: 14px;
            font-weight: 600;
            color: #333333;
            margin-bottom: 4px;
        }

        body.dark-mode .note-title {
            color: #E5E5E7;
        }

        .note-preview {
            font-size: 13px;
            color: #666666;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 4px;
        }

        body.dark-mode .note-preview {
            color: #8E8E93;
        }

        .note-date {
            font-size: 11px;
            color: #999999;
        }

        body.dark-mode .note-date {
            color: #636366;
        }

        /* ===== FILTER INPUT (Inside Header) ===== */
        .filter-search {
            flex: 1;
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            background: #F0F0F0;
            font-size: 13px;
            outline: none;
            height: 28px;
        }

        body.dark-mode .filter-search {
            background: #2C2C2E;
            color: #E5E5E7;
        }

        .filter-search::placeholder {
            color: #999999;
        }

        body.dark-mode .filter-search::placeholder {
            color: #636366;
        }

        .close-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            color: #999999;
            font-size: 16px;
            line-height: 1;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        body.dark-mode .close-button {
            color: #636366;
        }

        .close-button:hover {
            color: #666666;
        }

        body.dark-mode .close-button:hover {
            color: #8E8E93;
        }

        /* ===== UNIFIED FILTER INPUT ===== */
        .filter-input-unified {
            flex: 1;
            min-height: 28px;
            padding: 6px 8px;
            background: #F0F0F0;
            border-radius: 6px;
            font-size: 13px;
            line-height: 24px;
            outline: none;
            word-wrap: break-word;
            white-space: pre-wrap;
            overflow-wrap: break-word;
            color: #333333;
        }

        body.dark-mode .filter-input-unified {
            background: #2C2C2E;
            color: #E5E5E7;
        }

        .filter-input-unified:empty:before {
            content: attr(data-placeholder);
            color: #999999;
        }

        body.dark-mode .filter-input-unified:empty:before {
            color: #636366;
        }

        .filter-input-unified .filter-chip {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: #DADADA;
            color: #555555;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.1s;
            user-select: none;
            white-space: nowrap;
            height: 24px;
            line-height: 1;
            vertical-align: middle;
            margin: 0 4px 0 0;
        }

        body.dark-mode .filter-input-unified .filter-chip {
            background: #3A3A3C;
            color: #E5E5E7;
        }

        .filter-input-unified .filter-chip:hover {
            background: #CCCCCC;
        }

        body.dark-mode .filter-input-unified .filter-chip:hover {
            background: #48484A;
        }

        .filter-input-unified .chip-remove {
            font-size: 14px;
            line-height: 1;
            opacity: 0.6;
            transition: opacity 0.1s;
            margin-left: 2px;
        }

        .filter-input-unified .chip-remove:hover {
            opacity: 1;
        }

        /* Tag selection highlight */
        .tag-item.selected {
            background: rgba(245, 158, 11, 0.1);
        }

        body.dark-mode .tag-item.selected {
            background: rgba(245, 158, 11, 0.15);
        }

        .tag-item.selected .tag-label {
            color: #F59E0B;
            font-weight: 500;
        }

        /* ===== EDITOR (Right - flex) ===== */
        .editor-container {
            flex: 1;
            background: #FFFFFF;
            display: flex;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        body.dark-mode .editor-container {
            background: #1C1C1E;
        }
        
        /* Wrapper to contain the toolbar positioning */
        .editor-wrapper {
            position: relative;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        .editor-header {
            position: absolute;
            top: 20px;
            right: 40px;
            z-index: 10;
        }

        .format-button {
            background: #F5F5F5;
            border: 1px solid #E0E0E0;
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #333333;
            transition: all 0.2s;
        }

        body.dark-mode .format-button {
            background: #2C2C2E;
            border-color: #3A3A3C;
            color: #E5E5E7;
        }

        .format-button:hover {
            background: #E8E8E8;
        }

        body.dark-mode .format-button:hover {
            background: #3A3A3C;
        }

        .editor-content {
            width: 100%;
            padding: 36px 48px 120px 48px;
            overflow-y: auto;
            flex: 1;
        }

        .editor-title {
            font-size: 32px;
            font-weight: 700;
            color: #1A1A1A;
            margin-top: 0;
            margin-bottom: 20px;
            outline: none;
            border: none;
            width: 100%;
        }

        body.dark-mode .editor-title {
            color: #E5E5E7;
        }

        .editor-body {
            font-size: 16px;
            line-height: 1.6;
            color: #333333;
        }

        body.dark-mode .editor-body {
            color: #E5E5E7;
        }

        .editor-body h2 {
            font-size: 24px;
            font-weight: 600;
            margin: 32px 0 16px 0;
            color: #1A1A1A;
        }

        body.dark-mode .editor-body h2 {
            color: #E5E5E7;
        }

        .editor-body h3 {
            font-size: 20px;
            font-weight: 600;
            margin: 24px 0 12px 0;
            color: #1A1A1A;
        }

        body.dark-mode .editor-body h3 {
            color: #E5E5E7;
        }

        .editor-body ul {
            margin: 16px 0;
            padding-left: 24px;
        }

        .editor-body li {
            margin: 8px 0;
            color: #333333;
        }

        body.dark-mode .editor-body li {
            color: #E5E5E7;
        }

        .editor-body li::marker {
            color: #F59E0B;
        }

        .editor-body code {
            background: #F5F5F5;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 14px;
            color: #E53E3E;
        }

        body.dark-mode .editor-body code {
            background: #2C2C2E;
            color: #FC8181;
        }

        .editor-body pre {
            background: #F5F5F5;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 16px 0;
        }

        body.dark-mode .editor-body pre {
            background: #2C2C2E;
        }

        .editor-body pre code {
            background: none;
            padding: 0;
            color: #333333;
        }

        body.dark-mode .editor-body pre code {
            color: #E5E5E7;
        }

        .editor-body a {
            color: #F59E0B;
            text-decoration: none;
        }

        .editor-body a:hover {
            text-decoration: underline;
        }

        /* ===== FLOATING TOOLBAR ===== */
        .floating-toolbar {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 8px 12px;
            display: none;
            gap: 4px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .floating-toolbar.active {
            display: flex;
        }

        .toolbar-button {
            background: none;
            border: none;
            color: white;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.2s;
        }

        .toolbar-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Dark mode floating toolbar */
        body.dark-mode .floating-toolbar {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        body.dark-mode .toolbar-button {
            color: #1C1C1E;
        }

        body.dark-mode .toolbar-button:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #CCCCCC;
            border-radius: 4px;
        }

        body.dark-mode ::-webkit-scrollbar-thumb {
            background: #3A3A3C;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #999999;
        }

        body.dark-mode ::-webkit-scrollbar-thumb:hover {
            background: #48484A;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ===== SIDEBAR ===== -->
        <div class="sidebar">
            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <div class="sidebar-logo">Brio</div>
                <div style="display: flex; gap: 8px;">
                    <button class="sidebar-settings-button" onclick="toggleTheme()" title="Toggle Theme" id="themeToggle">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </button>
                    <button class="sidebar-settings-button" title="Settings">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Sidebar Content -->
            <div class="sidebar-content">
            <div class="sidebar-section">
                <div class="sidebar-item active">
                    <span class="tag-chevron hidden">â€º</span>
                    <div class="sidebar-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M8 2L2 6v8h4V9h4v5h4V6L8 2z"/>
                        </svg>
                    </div>
                    <span class="sidebar-label">Today</span>
                    <span class="sidebar-count">3</span>
                </div>

                <div class="sidebar-item" onclick="toggleNotesChildren(this)">
                    <span class="tag-chevron expanded">â€º</span>
                    <div class="sidebar-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M3 2h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/>
                            <path d="M2 5h12"/>
                        </svg>
                    </div>
                    <span class="sidebar-label">Notes</span>
                    <span class="sidebar-count">42</span>
                </div>

                <div class="notes-children expanded">
                    <div class="sidebar-item nested">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="sidebar-icon">
                            <svg viewBox="0 0 16 16">
                                <rect x="2" y="2" width="12" height="12" rx="2"/>
                            </svg>
                        </div>
                        <span class="sidebar-label">Projects</span>
                        <span class="sidebar-count">5</span>
                    </div>

                    <div class="sidebar-item nested">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="sidebar-icon">
                            <svg viewBox="0 0 16 16">
                                <circle cx="8" cy="5" r="3"/>
                                <path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6"/>
                            </svg>
                        </div>
                        <span class="sidebar-label">People</span>
                        <span class="sidebar-count">12</span>
                    </div>

                    <div class="sidebar-item nested">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="sidebar-icon">
                            <svg viewBox="0 0 16 16">
                                <rect x="2" y="4" width="12" height="10" rx="1"/>
                                <path d="M5 4V3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1"/>
                            </svg>
                        </div>
                        <span class="sidebar-label">Organizations</span>
                        <span class="sidebar-count">3</span>
                    </div>
                </div>

                <div class="sidebar-item">
                    <span class="tag-chevron hidden">â€º</span>
                    <div class="sidebar-icon">
                        <svg viewBox="0 0 16 16">
                            <rect x="2" y="2" width="12" height="12" rx="2"/>
                            <path d="M2 6h12"/>
                        </svg>
                    </div>
                    <span class="sidebar-label">Archive</span>
                    <span class="sidebar-count">8</span>
                </div>

                <div class="sidebar-item">
                    <span class="tag-chevron hidden">â€º</span>
                    <div class="sidebar-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M5 2l1-1h4l1 1h3v2H2V2h3z"/>
                            <path d="M3 4h10v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>
                        </svg>
                    </div>
                    <span class="sidebar-label">Trash</span>
                    <span class="sidebar-count">2</span>
                </div>
            </div>

            <!-- Tags Section -->
            <div class="sidebar-section">
                <div class="section-header" onclick="toggleSection(this)">
                    <span class="chevron expanded">â€º</span>
                    <span>Tags</span>
                </div>

                <!-- #work (no children) -->
                <div class="tag-item" data-tag-name="work">
                    <span class="tag-chevron hidden">â€º</span>
                    <div class="tag-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                            <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="tag-label">work</span>
                    <span class="tag-count">15</span>
                </div>

                <!-- #project (with children) -->
                <div class="tag-item" data-tag-name="project" onclick="toggleTagChildren(this)">
                    <span class="tag-chevron expanded">â€º</span>
                    <div class="tag-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                            <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="tag-label">project</span>
                    <span class="tag-count">13</span>
                </div>
                <div class="tag-children expanded">
                    <div class="tag-item child" data-tag-name="brio">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="tag-icon">
                            <svg viewBox="0 0 16 16">
                                <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                                <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <span class="tag-label">brio</span>
                        <span class="tag-count">8</span>
                    </div>
                    <div class="tag-item child" data-tag-name="ideas">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="tag-icon">
                            <svg viewBox="0 0 16 16">
                                <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                                <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <span class="tag-label">ideas</span>
                        <span class="tag-count">3</span>
                    </div>
                    <div class="tag-item child" data-tag-name="archive">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="tag-icon">
                            <svg viewBox="0 0 16 16">
                                <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                                <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <span class="tag-label">archive</span>
                        <span class="tag-count">2</span>
                    </div>
                </div>

                <!-- #personal (with children) -->
                <div class="tag-item" data-tag-name="personal" onclick="toggleTagChildren(this)">
                    <span class="tag-chevron expanded">â€º</span>
                    <div class="tag-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                            <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="tag-label">personal</span>
                    <span class="tag-count">28</span>
                </div>
                <div class="tag-children expanded">
                    <div class="tag-item child" data-tag-name="health">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="tag-icon">
                            <svg viewBox="0 0 16 16">
                                <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                                <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <span class="tag-label">health</span>
                        <span class="tag-count">5</span>
                    </div>
                    <div class="tag-item child" data-tag-name="finance">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="tag-icon">
                            <svg viewBox="0 0 16 16">
                                <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                                <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <span class="tag-label">finance</span>
                        <span class="tag-count">2</span>
                    </div>
                    <div class="tag-item child" data-tag-name="travel">
                        <span class="tag-chevron hidden">â€º</span>
                        <div class="tag-icon">
                            <svg viewBox="0 0 16 16">
                                <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                                <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <span class="tag-label">travel</span>
                        <span class="tag-count">1</span>
                    </div>
                </div>

                <!-- #meeting (no children) -->
                <div class="tag-item" data-tag-name="meeting">
                    <span class="tag-chevron hidden">â€º</span>
                    <div class="tag-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                            <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="tag-label">meeting</span>
                    <span class="tag-count">7</span>
                </div>

                <!-- #todo (no children) -->
                <div class="tag-item" data-tag-name="todo">
                    <span class="tag-chevron hidden">â€º</span>
                    <div class="tag-icon">
                        <svg viewBox="0 0 16 16">
                            <path d="M2 2h5l7 7-5 5-7-7V2z"/>
                            <circle cx="5.5" cy="5.5" r="0.5" fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="tag-label">todo</span>
                    <span class="tag-count">12</span>
                </div>
            </div>
            </div>
        </div>

        <!-- ===== NOTE LIST ===== -->
        <div class="note-list-container">
            <div class="note-list-header">
                <!-- Default header state -->
                <div class="header-default" id="headerDefault">
                    <!-- Right: Icon group (only icons, no dropdown) -->
                    <div class="header-icons" style="margin-left: auto;">
                        <!-- New Note icon -->
                        <button class="header-icon-button" title="New Note">
                            <svg viewBox="0 0 20 20">
                                <rect x="3" y="3" width="14" height="14" rx="2"/>
                                <path d="M10 7v6M7 10h6"/>
                            </svg>
                        </button>

                        <!-- Sort icon -->
                        <button class="header-icon-button" onclick="toggleSortDropdown()" title="Sort">
                            <svg viewBox="0 0 20 20">
                                <path d="M4 6h12M4 10h8M4 14h5"/>
                            </svg>
                        </button>

                        <!-- Search icon -->
                        <button class="header-icon-button" onclick="toggleFilterInput()" title="Search">
                            <svg viewBox="0 0 20 20">
                                <circle cx="9" cy="9" r="5"/>
                                <path d="M13 13l4 4"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Filter active state (replaces header content) -->
                <div class="header-filter" id="headerFilter">
                    <div class="filter-input-unified" contenteditable="true" data-placeholder="Filter..." id="filterInputUnified"></div>
                    <button class="close-button" onclick="closeFilterBar()">âœ•</button>
                </div>

                <!-- Sort dropdown menu -->
                <div class="sort-dropdown" id="sortDropdown">
                    <div class="sort-section-label">Sort by</div>
                    <div class="sort-option selected" data-sort="created" onclick="selectSort(this)">
                        <span>Created date</span>
                        <span class="checkmark">âœ“</span>
                    </div>
                    <div class="sort-option" data-sort="modified" onclick="selectSort(this)">
                        <span>Modified date</span>
                        <span class="checkmark">âœ“</span>
                    </div>
                    <div class="sort-option" data-sort="title" onclick="selectSort(this)">
                        <span>Title</span>
                        <span class="checkmark">âœ“</span>
                    </div>
                    <div class="sort-divider"></div>
                    <div class="sort-section-label">Direction</div>
                    <div class="sort-option selected" data-direction="asc" onclick="selectDirection(this)">
                        <span>Ascending â†‘</span>
                        <span class="checkmark">âœ“</span>
                    </div>
                    <div class="sort-option" data-direction="desc" onclick="selectDirection(this)">
                        <span>Descending â†“</span>
                        <span class="checkmark">âœ“</span>
                    </div>
                </div>
            </div>

            <div class="note-list">
                <div class="note-item selected">
                    <div class="note-title">Brio Architecture Notes</div>
                    <div class="note-preview">Exploring the three-column layout inspired by Bear. The sidebar provides quick navigation, the note list shows...</div>
                    <div class="note-date">2 hours ago</div>
                </div>

                <div class="note-item">
                    <div class="note-title">Meeting Notes - Product Review</div>
                    <div class="note-preview">Discussed the new features for Q1. Team agreed on prioritizing the search functionality and improving the...</div>
                    <div class="note-date">Yesterday</div>
                </div>

                <div class="note-item">
                    <div class="note-title">API Design Patterns</div>
                    <div class="note-preview">REST vs GraphQL considerations. For Brio, we need to support offline-first architecture with PouchDB...</div>
                    <div class="note-date">2 days ago</div>
                </div>

                <div class="note-item">
                    <div class="note-title">UI/UX Research</div>
                    <div class="note-preview">Analyzed Bear, Notion, and Obsidian. Key takeaways: simplicity wins, keyboard shortcuts are essential...</div>
                    <div class="note-date">3 days ago</div>
                </div>

                <div class="note-item">
                    <div class="note-title">Development Roadmap</div>
                    <div class="note-preview">Phase 1: Core editor functionality. Phase 2: Sync and collaboration. Phase 3: Mobile apps...</div>
                    <div class="note-date">1 week ago</div>
                </div>

                <div class="note-item">
                    <div class="note-title">Performance Optimization</div>
                    <div class="note-preview">Identified bottlenecks in the rendering pipeline. Virtual scrolling for large note lists will be crucial...</div>
                    <div class="note-date">1 week ago</div>
                </div>

                <div class="note-item">
                    <div class="note-title">Security Considerations</div>
                    <div class="note-preview">End-to-end encryption requirements. Need to research best practices for local-first applications...</div>
                    <div class="note-date">2 weeks ago</div>
                </div>
            </div>
        </div>

        <!-- ===== EDITOR ===== -->
        <div class="editor-container">
            <div class="editor-wrapper">
                <div class="editor-header">
                    <button class="format-button" onclick="toggleToolbar()">Aa</button>
                </div>

                <div class="editor-content">
                    <div class="editor-title" contenteditable="true">Brio Architecture Notes</div>
                    <div class="editor-body">
                        <h2>Overview</h2>
                        <p>Brio is a modern note-taking application inspired by Bear's elegant design. The goal is to create a fast, beautiful, and powerful tool for organizing thoughts and knowledge.</p>

                        <h3>Key Features</h3>
                        <ul>
                            <li>Three-column layout for efficient navigation</li>
                            <li>Markdown support with live preview</li>
                            <li>Tag-based organization system</li>
                            <li>Offline-first architecture with PouchDB</li>
                            <li>Cross-platform support (Web, Desktop, Mobile)</li>
                        </ul>

                        <h3>Technical Stack</h3>
                        <ul>
                            <li><strong>Frontend:</strong> Vue 3 + Quasar Framework</li>
                            <li><strong>Database:</strong> PouchDB with CouchDB sync</li>
                            <li><strong>Desktop:</strong> Electron</li>
                            <li><strong>Mobile:</strong> Capacitor</li>
                        </ul>

                        <h2>Architecture Decisions</h2>
                        <p>We chose an offline-first approach to ensure the app works seamlessly without internet connectivity. PouchDB provides excellent sync capabilities when online.</p>

                        <h3>Code Example</h3>
                        <pre><code>// Initialize PouchDB
const db = new PouchDB('brio-notes');

// Create a new note
await db.put({
  _id: 'note-' + Date.now(),
  title: 'My First Note',
  content: 'Hello, Brio!',
  tags: ['#welcome', '#getting-started']
});</code></pre>

                        <h2>Next Steps</h2>
                        <ul>
                            <li>Implement the editor component</li>
                            <li>Add search functionality</li>
                            <li>Build the sync mechanism</li>
                            <li>Design the mobile interface</li>
                        </ul>

                        <p>For more information, check out the <a href="#">development roadmap</a>.</p>
                    </div>
                </div>

                <!-- Floating Toolbar -->
                <div class="floating-toolbar" id="floatingToolbar">
                    <button class="toolbar-button">B</button>
                    <button class="toolbar-button"><em>I</em></button>
                    <button class="toolbar-button"><u>U</u></button>
                    <button class="toolbar-button">ðŸ”—</button>
                    <button class="toolbar-button">&lt;/&gt;</button>
                    <button class="toolbar-button">â€¢ List</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== TAG FILTERING STATE =====
        const selectedTags = new Set();

        // Create chip element
        function createChipElement(tagName) {
            const chip = document.createElement('span');
            chip.className = 'filter-chip';
            chip.contentEditable = 'false';
            chip.dataset.tagName = tagName;
            chip.innerHTML = `tag:${tagName}<span class="chip-remove">Ã—</span>`;
            return chip;
        }

        // Add chip to filter input
        function addChipToFilter(tagName) {
            const input = document.getElementById('filterInputUnified');
            const chip = createChipElement(tagName);
            
            // Insert chip at cursor position or at end
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && input.contains(selection.anchorNode)) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(chip);
                
                // Add space after chip
                const space = document.createTextNode(' ');
                range.setStartAfter(chip);
                range.insertNode(space);
                range.setStartAfter(space);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
            } else {
                input.appendChild(chip);
                input.appendChild(document.createTextNode(' '));
            }
            
            input.focus();
        }

        // Remove chip
        function removeChip(chip) {
            const tagName = chip.dataset.tagName;
            selectedTags.delete(tagName);
            chip.remove();
            updateTagSelectionUI();
            
            // Close filter bar if empty
            const input = document.getElementById('filterInputUnified');
            if (input.textContent.trim() === '' && selectedTags.size === 0) {
                closeFilterBar();
            }
        }

        // Toggle tag filter
        function toggleTagFilter(tagName) {
            if (selectedTags.has(tagName)) {
                selectedTags.delete(tagName);
                // Remove chip from input
                const input = document.getElementById('filterInputUnified');
                const chip = input.querySelector(`.filter-chip[data-tag-name="${tagName}"]`);
                if (chip) {
                    chip.remove();
                }
            } else {
                selectedTags.add(tagName);
                addChipToFilter(tagName);
            }
            
            updateFilterBar();
            updateTagSelectionUI();
        }

        // Update filter bar visibility
        function updateFilterBar() {
            const headerDefault = document.getElementById('headerDefault');
            const headerFilter = document.getElementById('headerFilter');
            const input = document.getElementById('filterInputUnified');
            
            if (selectedTags.size > 0 || input.textContent.trim() !== '') {
                // Open filter bar
                headerDefault.classList.add('hidden');
                headerFilter.classList.add('active');
            } else {
                // Close filter bar if empty
                headerDefault.classList.remove('hidden');
                headerFilter.classList.remove('active');
            }
        }

        // Update tag selection visual state
        function updateTagSelectionUI() {
            document.querySelectorAll('.tag-item').forEach(item => {
                const tagLabel = item.querySelector('.tag-label');
                if (tagLabel) {
                    const tagName = tagLabel.textContent.trim();
                    if (selectedTags.has(tagName)) {
                        item.classList.add('selected');
                    } else {
                        item.classList.remove('selected');
                    }
                }
            });
        }

        // Close filter bar
        function closeFilterBar() {
            const headerDefault = document.getElementById('headerDefault');
            const headerFilter = document.getElementById('headerFilter');
            const input = document.getElementById('filterInputUnified');
            
            // Clear all filters
            selectedTags.clear();
            input.innerHTML = '';
            
            // Update UI
            headerDefault.classList.remove('hidden');
            headerFilter.classList.remove('active');
            updateTagSelectionUI();
        }

        // Toggle section expansion
        function toggleSection(header) {
            const chevron = header.querySelector('.chevron');
            chevron.classList.toggle('expanded');
            
            const section = header.closest('.sidebar-section');
            const items = section.querySelectorAll('.sidebar-item, .tag-item');
            const tagChildren = section.querySelectorAll('.tag-children');
            
            items.forEach(item => {
                item.style.display = chevron.classList.contains('expanded') ? 'flex' : 'none';
            });
            
            tagChildren.forEach(children => {
                if (chevron.classList.contains('expanded')) {
                    // Restore previous expanded state
                    const parent = children.previousElementSibling;
                    const parentChevron = parent?.querySelector('.tag-chevron');
                    if (parentChevron?.classList.contains('expanded')) {
                        children.style.display = 'block';
                    }
                } else {
                    children.style.display = 'none';
                }
            });
        }

        // Toggle tag children
        function toggleTagChildren(tagItem) {
            const chevron = tagItem.querySelector('.tag-chevron');
            if (chevron.classList.contains('hidden')) return;
            
            chevron.classList.toggle('expanded');
            
            const children = tagItem.nextElementSibling;
            if (children && children.classList.contains('tag-children')) {
                children.classList.toggle('expanded');
            }
        }

        // Toggle Notes children
        function toggleNotesChildren(notesItem) {
            const chevron = notesItem.querySelector('.tag-chevron');
            chevron.classList.toggle('expanded');
            
            const children = notesItem.nextElementSibling;
            if (children && children.classList.contains('notes-children')) {
                children.classList.toggle('expanded');
            }
        }

        // Toggle filter input
        function toggleFilterInput() {
            const headerDefault = document.getElementById('headerDefault');
            const headerFilter = document.getElementById('headerFilter');
            const input = document.getElementById('filterInputUnified');
            const sortDropdown = document.getElementById('sortDropdown');
            
            // Close sort dropdown if open
            sortDropdown.classList.remove('active');
            
            // Toggle visibility
            headerDefault.classList.toggle('hidden');
            headerFilter.classList.toggle('active');
            
            // Focus the input when opened
            if (headerFilter.classList.contains('active')) {
                setTimeout(() => {
                    input.focus();
                    // Move cursor to end
                    const range = document.createRange();
                    const selection = window.getSelection();
                    range.selectNodeContents(input);
                    range.collapse(false);
                    selection.removeAllRanges();
                    selection.addRange(range);
                }, 100);
            }
        }

        // Toggle sort dropdown
        function toggleSortDropdown() {
            const sortDropdown = document.getElementById('sortDropdown');
            sortDropdown.classList.toggle('active');
        }

        // Select sort option
        function selectSort(option) {
            const sortOptions = document.querySelectorAll('.sort-option[data-sort]');
            sortOptions.forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');
            
            // Here you would implement the actual sorting logic
            console.log('Sort by:', option.dataset.sort);
        }

        // Select direction option
        function selectDirection(option) {
            const directionOptions = document.querySelectorAll('.sort-option[data-direction]');
            directionOptions.forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');
            
            // Here you would implement the actual sorting logic
            console.log('Direction:', option.dataset.direction);
        }

        // Close sort dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const sortDropdown = document.getElementById('sortDropdown');
            const sortButton = e.target.closest('[title="Sort"]');
            
            if (!sortDropdown.contains(e.target) && !sortButton) {
                sortDropdown.classList.remove('active');
            }
        });

        // Toggle floating toolbar
        function toggleToolbar() {
            const toolbar = document.getElementById('floatingToolbar');
            toolbar.classList.toggle('active');
        }

        // Toggle theme (light/dark mode)
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            updateThemeIcon();
        }

        // Update theme toggle icon
        function updateThemeIcon() {
            const themeToggle = document.getElementById('themeToggle');
            const isDark = document.body.classList.contains('dark-mode');
            
            // Moon icon for light mode (click to go dark), Sun icon for dark mode (click to go light)
            themeToggle.innerHTML = isDark 
                ? `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="5"/>
                    <line x1="12" y1="1" x2="12" y2="3"/>
                    <line x1="12" y1="21" x2="12" y2="23"/>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                    <line x1="1" y1="12" x2="3" y2="12"/>
                    <line x1="21" y1="12" x2="23" y2="12"/>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                   </svg>`
                : `<svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                   </svg>`;
        }

        // Initialize theme icon on page load
        document.addEventListener('DOMContentLoaded', updateThemeIcon);

        // Setup unified filter input event handlers
        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('filterInputUnified');
            
            // Handle click on chip remove button
            input.addEventListener('click', function(e) {
                if (e.target.classList.contains('chip-remove')) {
                    const chip = e.target.closest('.filter-chip');
                    if (chip) {
                        removeChip(chip);
                    }
                }
            });
            
            // Handle backspace to delete chip
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace') {
                    const selection = window.getSelection();
                    if (selection.rangeCount === 0) return;
                    
                    const range = selection.getRangeAt(0);
                    
                    // Check if cursor is at start of text node after a chip
                    if (range.collapsed && range.startOffset === 0) {
                        const node = range.startContainer;
                        
                        // If we're in a text node, check previous sibling
                        if (node.nodeType === Node.TEXT_NODE) {
                            const prev = node.previousSibling;
                            if (prev && prev.classList && prev.classList.contains('filter-chip')) {
                                e.preventDefault();
                                removeChip(prev);
                                return;
                            }
                        }
                        
                        // If we're at the start of the contenteditable, delete last chip
                        if (node === input || (node.nodeType === Node.TEXT_NODE && node.previousSibling === null && node.parentNode === input)) {
                            const chips = input.querySelectorAll('.filter-chip');
                            if (chips.length > 0 && input.textContent.trim() === '') {
                                e.preventDefault();
                                removeChip(chips[chips.length - 1]);
                                return;
                            }
                        }
                    }
                }
                
                // Auto-convert tag:xxx to chip on Space or Enter
                if (e.key === ' ' || e.key === 'Enter') {
                    const text = input.textContent;
                    const match = text.match(/tag:(\w+)$/);
                    if (match) {
                        e.preventDefault();
                        const tagName = match[1];
                        
                        // Remove the tag text
                        const selection = window.getSelection();
                        const range = selection.getRangeAt(0);
                        
                        // Find and remove the tag:xxx text
                        const textNodes = [];
                        const walker = document.createTreeWalker(input, NodeFilter.SHOW_TEXT);
                        let node;
                        while (node = walker.nextNode()) {
                            textNodes.push(node);
                        }
                        
                        // Remove tag:xxx from the last text node
                        for (let i = textNodes.length - 1; i >= 0; i--) {
                            const textNode = textNodes[i];
                            const nodeText = textNode.textContent;
                            const tagMatch = nodeText.match(/tag:(\w+)$/);
                            if (tagMatch) {
                                textNode.textContent = nodeText.replace(/tag:\w+$/, '');
                                break;
                            }
                        }
                        
                        // Add chip
                        selectedTags.add(tagName);
                        addChipToFilter(tagName);
                        updateTagSelectionUI();
                    }
                }
            });
            
            // Update filter bar state on input
            input.addEventListener('input', function() {
                updateFilterBar();
            });
        });

        // Handle sidebar item clicks
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.addEventListener('click', (e) => {
                // Don't select if clicking chevron area on Notes item
                if (e.target.closest('.tag-chevron')) {
                    return;
                }
                document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            });
        });

        // Handle tag item clicks
        document.querySelectorAll('.tag-item').forEach(item => {
            item.addEventListener('click', (e) => {
                // Don't select if clicking chevron area
                if (e.target.closest('.tag-chevron') && !e.target.closest('.tag-chevron').classList.contains('hidden')) {
                    return;
                }
                
                // Get tag name and toggle filter
                const tagLabel = item.querySelector('.tag-label');
                if (tagLabel) {
                    const tagName = tagLabel.textContent.trim();
                    toggleTagFilter(tagName);
                }
            });
        });

        // Handle note item clicks
        document.querySelectorAll('.note-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.note-item').forEach(i => i.classList.remove('selected'));
                item.classList.add('selected');
            });
        });
    </script>
</body>
</html>
